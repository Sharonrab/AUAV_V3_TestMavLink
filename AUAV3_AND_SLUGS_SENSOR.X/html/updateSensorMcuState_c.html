<HTML>
<HEAD>
<TITLE>RTW Report - updateSensorMcuState.c </TITLE>
<STYLE> .LN { font-style: italic; color: #888888 } </STYLE>
<STYLE> .CT { font-style: italic; color: #117755 } </STYLE>
<STYLE> .PP { font-style: bold;   color: #992211 } </STYLE>
<STYLE> .KW { font-style: bold;   color: #112266 } </STYLE>
<STYLE> .DT { font-style: bold;   color: #112266 } </STYLE>
<SCRIPT language="JavaScript" type="text/javascript">
<!--
function rtwHilite(aBlock,aParentSID) {
 aParentSID = "";
 try {
    window.location.href="matlab: if ~isempty(which('private/rtwbindmodel')), rtwprivate rtwbindmodel 'C:\\Users\\sharon\\Documents\\GitHub\\AUAV_V3_TestMavLink\\AUAV3_AND_SLUGS_SENSOR.mdl' 'C:\\Users\\sharon\\Documents\\GitHub\\AUAV_V3_TestMavLink\\AUAV3_AND_SLUGS_SENSOR.X' '', end; rtwprivate code2model "+aBlock+" "+aParentSID+";"
 } catch (e) { 
 }
} // end rtwHilite
//-->
</SCRIPT>
</HEAD>
<BODY BGCOLOR="#eeeeee" TEXT="#1122aa" ONLOAD="if (top) { if (top.rtwFileOnLoad) top.rtwFileOnLoad(window);} ">
<P>
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="6" WIDTH="100%" HEIGHT="100%"><TR><TD WIDTH="100%" VALIGN="top" BGCOLOR="#ffffff">
<H4>File: <A HREF="file:///C:\Users\sharon\Documents\GitHub\AUAV_V3_TestMavLink\clib\updateSensorMcuState.c" TARGET="rtwreport_document_frame">C:\Users\sharon\Documents\GitHub\AUAV_V3_TestMavLink\clib\updateSensorMcuState.c</A></H4>
<PRE id="RTWcode">
<SPAN><A CLASS="LN" NAME="1">    1   </A><SPAN CLASS="CT">/*</SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="2">    2   </A><SPAN CLASS="CT">The MIT License</SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="3">    3   </A><SPAN CLASS="CT"></SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="4">    4   </A><SPAN CLASS="CT">Copyright (c) 2009 UCSC Autonomous Systems Lab</SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="5">    5   </A><SPAN CLASS="CT"></SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="6">    6   </A><SPAN CLASS="CT">Permission is hereby granted, free of charge, to any person obtaining a copy</SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="7">    7   </A><SPAN CLASS="CT">of this software and associated documentation files (the "Software"), to deal</SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="8">    8   </A><SPAN CLASS="CT">in the Software without restriction, including without limitation the rights</SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="9">    9   </A><SPAN CLASS="CT">to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="10">   10   </A><SPAN CLASS="CT">copies of the Software, and to permit persons to whom the Software is</SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="11">   11   </A><SPAN CLASS="CT">furnished to do so, subject to the following conditions:</SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="12">   12   </A><SPAN CLASS="CT"></SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="13">   13   </A><SPAN CLASS="CT">The above copyright notice and this permission notice shall be included in</SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="14">   14   </A><SPAN CLASS="CT">all copies or substantial portions of the Software.</SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="15">   15   </A><SPAN CLASS="CT"></SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="16">   16   </A><SPAN CLASS="CT">THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="17">   17   </A><SPAN CLASS="CT">IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="18">   18   </A><SPAN CLASS="CT">FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="19">   19   </A><SPAN CLASS="CT">AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="20">   20   </A><SPAN CLASS="CT">LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="21">   21   </A><SPAN CLASS="CT">OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN</SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="22">   22   </A><SPAN CLASS="CT">THE SOFTWARE.</SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="23">   23   </A><SPAN CLASS="CT"></SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="24">   24   </A><SPAN CLASS="CT"> */</SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="25">   25   </A>
</SPAN><SPAN><A CLASS="LN" NAME="26">   26   </A>
</SPAN><SPAN><A CLASS="LN" NAME="27">   27   </A><FONT COLOR="#992211">#</FONT><SPAN CLASS="PP">include</SPAN> <FONT COLOR="#992211">&quot;updateSensorMcuState.h&quot;</FONT>
</SPAN><SPAN><A CLASS="LN" NAME="28">   28   </A>
</SPAN><SPAN><A CLASS="LN" NAME="29">   29   </A><SPAN CLASS="DT">void</SPAN> <A NAME="fcn_updateRawADCData">updateRawADCData</A>(int16_t* adcData) <B>{</B>
</SPAN><SPAN><A CLASS="LN" NAME="30">   30   </A>    <SPAN CLASS="CT">//mlRawPressureData.time_usec = mlAttitudeData.time_boot_ms; // set by updateTimestamp()</SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="31">   31   </A>    <A HREF="AUAV3_AND_SLUGS_SENSOR_c.html#var_mlRawPressureData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlRawPressureData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlRawPressureData</FONT></A>.press_abs = (int16_t) adcData[0]; <SPAN CLASS="CT">// Baro</SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="32">   32   </A>    <A HREF="AUAV3_AND_SLUGS_SENSOR_c.html#var_mlRawPressureData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlRawPressureData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlRawPressureData</FONT></A>.press_diff1 = (int16_t) adcData[1]; <SPAN CLASS="CT">// Pito</SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="33">   33   </A>    <A HREF="AUAV3_AND_SLUGS_SENSOR_c.html#var_mlRawPressureData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlRawPressureData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlRawPressureData</FONT></A>.press_diff2 = (int16_t) adcData[2]; <SPAN CLASS="CT">// Power</SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="34">   34   </A>    <A HREF="AUAV3_AND_SLUGS_SENSOR_c.html#var_mlRawPressureData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlRawPressureData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlRawPressureData</FONT></A>.temperature = (int16_t) adcData[3]; <SPAN CLASS="CT">// Temp</SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="35">   35   </A><B>}</B>
</SPAN><SPAN><A CLASS="LN" NAME="36">   36   </A>
</SPAN><SPAN><A CLASS="LN" NAME="37">   37   </A><SPAN CLASS="DT">void</SPAN> <A NAME="fcn_updateAirData">updateAirData</A>(<SPAN CLASS="DT">float</SPAN>* airData) <B>{</B>
</SPAN><SPAN><A CLASS="LN" NAME="38">   38   </A>    <SPAN CLASS="CT">//mlAirData.time_boot_ms = mlAttitudeData.time_boot_ms; // set by updateTimestamp()</SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="39">   39   </A>    <A HREF="AUAV3_AND_SLUGS_SENSOR_c.html#var_mlAirData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlAirData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlAirData</FONT></A>.press_diff = airData[0]; <SPAN CLASS="CT">//dynamic</SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="40">   40   </A>    <A HREF="AUAV3_AND_SLUGS_SENSOR_c.html#var_mlAirData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlAirData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlAirData</FONT></A>.press_abs = airData[1]; <SPAN CLASS="CT">//static</SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="41">   41   </A>    <A HREF="AUAV3_AND_SLUGS_SENSOR_c.html#var_mlAirData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlAirData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlAirData</FONT></A>.temperature = (int16_t) (airData[2]*10.0); <SPAN CLASS="CT">// temp 0.01</SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="42">   42   </A><B>}</B>
</SPAN><SPAN><A CLASS="LN" NAME="43">   43   </A>
</SPAN><SPAN><A CLASS="LN" NAME="44">   44   </A><SPAN CLASS="DT">void</SPAN> <A NAME="fcn_updateLoadData">updateLoadData</A>(uint8_t load, uint16_t mvPower) <B>{</B>
</SPAN><SPAN><A CLASS="LN" NAME="45">   45   </A>    <A HREF="mavlinkSensorMcu_c.html#var_mlCpuLoadData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlCpuLoadData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlCpuLoadData</FONT></A>.sensLoad = load;
</SPAN><SPAN><A CLASS="LN" NAME="46">   46   </A>    <A HREF="mavlinkSensorMcu_c.html#var_mlCpuLoadData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlCpuLoadData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlCpuLoadData</FONT></A>.batVolt = mvPower;
</SPAN><SPAN><A CLASS="LN" NAME="47">   47   </A><B>}</B>
</SPAN><SPAN><A CLASS="LN" NAME="48">   48   </A>
</SPAN><SPAN><A CLASS="LN" NAME="49">   49   </A><SPAN CLASS="DT">void</SPAN> <A NAME="fcn_updateAttitude">updateAttitude</A>(<SPAN CLASS="DT">float</SPAN> * attitudeData) <B>{</B>
</SPAN><SPAN><A CLASS="LN" NAME="50">   50   </A>
</SPAN><SPAN><A CLASS="LN" NAME="51">   51   </A>    <A HREF="mavlinkSensorMcu_c.html#var_mlAttitudeData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlAttitudeData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlAttitudeData</FONT></A>.roll = attitudeData[0];
</SPAN><SPAN><A CLASS="LN" NAME="52">   52   </A>    <A HREF="mavlinkSensorMcu_c.html#var_mlAttitudeData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlAttitudeData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlAttitudeData</FONT></A>.pitch = attitudeData[1];
</SPAN><SPAN><A CLASS="LN" NAME="53">   53   </A>    <A HREF="mavlinkSensorMcu_c.html#var_mlAttitudeData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlAttitudeData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlAttitudeData</FONT></A>.yaw = attitudeData[2];
</SPAN><SPAN><A CLASS="LN" NAME="54">   54   </A>    <A HREF="mavlinkSensorMcu_c.html#var_mlAttitudeData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlAttitudeData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlAttitudeData</FONT></A>.rollspeed = attitudeData[3];
</SPAN><SPAN><A CLASS="LN" NAME="55">   55   </A>    <A HREF="mavlinkSensorMcu_c.html#var_mlAttitudeData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlAttitudeData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlAttitudeData</FONT></A>.pitchspeed = attitudeData[4];
</SPAN><SPAN><A CLASS="LN" NAME="56">   56   </A>    <A HREF="mavlinkSensorMcu_c.html#var_mlAttitudeData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlAttitudeData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlAttitudeData</FONT></A>.yawspeed = attitudeData[5];
</SPAN><SPAN><A CLASS="LN" NAME="57">   57   </A>
</SPAN><SPAN><A CLASS="LN" NAME="58">   58   </A><B>}</B>
</SPAN><SPAN><A CLASS="LN" NAME="59">   59   </A>
</SPAN><SPAN><A CLASS="LN" NAME="60">   60   </A><SPAN CLASS="DT">void</SPAN> <A NAME="fcn_getGSLocation">getGSLocation</A>(<SPAN CLASS="DT">float</SPAN>* altLatLon) <B>{</B>
</SPAN><SPAN><A CLASS="LN" NAME="61">   61   </A>
</SPAN><SPAN><A CLASS="LN" NAME="62">   62   </A>    altLatLon[0] = <A HREF="mavlinkSensorMcu_c.html#var_mlGSLocationFloat" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlGSLocationFloat');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlGSLocationFloat</FONT></A>.alt * 0.001;
</SPAN><SPAN><A CLASS="LN" NAME="63">   63   </A>    altLatLon[1] = <A HREF="mavlinkSensorMcu_c.html#var_mlGSLocationFloat" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlGSLocationFloat');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlGSLocationFloat</FONT></A>.lat * 0.0000001;
</SPAN><SPAN><A CLASS="LN" NAME="64">   64   </A>    altLatLon[2] = <A HREF="mavlinkSensorMcu_c.html#var_mlGSLocationFloat" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlGSLocationFloat');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlGSLocationFloat</FONT></A>.lon * 0.0000001;
</SPAN><SPAN><A CLASS="LN" NAME="65">   65   </A><B>}</B>
</SPAN><SPAN><A CLASS="LN" NAME="66">   66   </A>
</SPAN><SPAN><A CLASS="LN" NAME="67">   67   </A><SPAN CLASS="CT">/* Simulink sends 10's of milliseconds since boot. */</SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="68">   68   </A><SPAN CLASS="DT">void</SPAN> <A NAME="fcn_updateTimeStamp">updateTimeStamp</A>(uint32_t timeSt) <B>{</B>
</SPAN><SPAN><A CLASS="LN" NAME="69">   69   </A>
</SPAN><SPAN><A CLASS="LN" NAME="70">   70   </A>    <SPAN CLASS="CT">// Todo fix units later</SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="71">   71   </A>    <A HREF="AUAV3_AND_SLUGS_SENSOR_c.html#var_mlAirData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlAirData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlAirData</FONT></A>.time_boot_ms = timeSt;
</SPAN><SPAN><A CLASS="LN" NAME="72">   72   </A>    <A HREF="mavlinkSensorMcu_c.html#var_mlAttitudeData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlAttitudeData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlAttitudeData</FONT></A>.time_boot_ms = timeSt;
</SPAN><SPAN><A CLASS="LN" NAME="73">   73   </A>    <A HREF="AUAV3_AND_SLUGS_SENSOR_c.html#var_mlRawPressureData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlRawPressureData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlRawPressureData</FONT></A>.time_usec = timeSt;
</SPAN><SPAN><A CLASS="LN" NAME="74">   74   </A>
</SPAN><SPAN><A CLASS="LN" NAME="75">   75   </A>    <SPAN CLASS="CT">/* Doesn't work:</SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="76">   76   </A><SPAN CLASS="CT">    // Messages with time stamps in milliseconds</SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="77">   77   </A><SPAN CLASS="CT">    uint32_t timeMs = timeSt*10;</SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="78">   78   </A><SPAN CLASS="CT">    mlAirData.time_boot_ms = (uint64_t) timeMs;</SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="79">   79   </A><SPAN CLASS="CT">    mlAttitudeData.time_boot_ms = timeMs;</SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="80">   80   </A><SPAN CLASS="CT">    mlFilteredData.time_boot_ms = timeMs;</SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="81">   81   </A><SPAN CLASS="CT">    mlLocalPositionData.time_boot_ms = timeMs;</SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="82">   82   </A><SPAN CLASS="CT">    mlPilotConsoleData.time_boot_ms = timeMs;</SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="83">   83   </A><SPAN CLASS="CT"></SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="84">   84   </A><SPAN CLASS="CT">    // Messages with time stamps in microseconds</SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="85">   85   </A><SPAN CLASS="CT">    uint64_t timeUsec = timeSt*10000;</SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="86">   86   </A><SPAN CLASS="CT">    mlGpsData.time_usec = timeUsec;</SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="87">   87   </A><SPAN CLASS="CT">    mlRawImuData.time_usec = timeUsec;</SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="88">   88   </A><SPAN CLASS="CT">    mlRawPressureData.time_usec = timeUsec;</SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="89">   89   </A><SPAN CLASS="CT">    //mlPwmCommands.time_usec = timeSt; // this one is handled by control dsc</SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="90">   90   </A><SPAN CLASS="CT">     * */</SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="91">   91   </A><B>}</B>
</SPAN><SPAN><A CLASS="LN" NAME="92">   92   </A>
</SPAN><SPAN><A CLASS="LN" NAME="93">   93   </A><SPAN CLASS="DT">void</SPAN> <A NAME="fcn_updatePosition">updatePosition</A>(<SPAN CLASS="DT">float</SPAN> * posData) <B>{</B>
</SPAN><SPAN><A CLASS="LN" NAME="94">   94   </A>
</SPAN><SPAN><A CLASS="LN" NAME="95">   95   </A>    <A HREF="mavlinkSensorMcu_c.html#var_mlLocalPositionData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlLocalPositionData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlLocalPositionData</FONT></A>.x = posData[0];
</SPAN><SPAN><A CLASS="LN" NAME="96">   96   </A>    <A HREF="mavlinkSensorMcu_c.html#var_mlLocalPositionData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlLocalPositionData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlLocalPositionData</FONT></A>.y = posData[1];
</SPAN><SPAN><A CLASS="LN" NAME="97">   97   </A>    <A HREF="mavlinkSensorMcu_c.html#var_mlLocalPositionData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlLocalPositionData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlLocalPositionData</FONT></A>.z = posData[2];
</SPAN><SPAN><A CLASS="LN" NAME="98">   98   </A>    <A HREF="mavlinkSensorMcu_c.html#var_mlLocalPositionData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlLocalPositionData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlLocalPositionData</FONT></A>.vx = posData[3];
</SPAN><SPAN><A CLASS="LN" NAME="99">   99   </A>    <A HREF="mavlinkSensorMcu_c.html#var_mlLocalPositionData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlLocalPositionData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlLocalPositionData</FONT></A>.vy = posData[4];
</SPAN><SPAN><A CLASS="LN" NAME="100">  100   </A>    <A HREF="mavlinkSensorMcu_c.html#var_mlLocalPositionData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlLocalPositionData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlLocalPositionData</FONT></A>.vz = posData[5];
</SPAN><SPAN><A CLASS="LN" NAME="101">  101   </A><B>}</B>
</SPAN><SPAN><A CLASS="LN" NAME="102">  102   </A>
</SPAN><SPAN><A CLASS="LN" NAME="103">  103   </A><SPAN CLASS="DT">void</SPAN> <A NAME="fcn_updatePilotConsole">updatePilotConsole</A>(uint16_t * pilData) <B>{</B>
</SPAN><SPAN><A CLASS="LN" NAME="104">  104   </A>    <SPAN CLASS="CT">// dT dA dR dE dFail</SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="105">  105   </A>
</SPAN><SPAN><A CLASS="LN" NAME="106">  106   </A>    <A HREF="mavlinkSensorMcu_c.html#var_mlPilotConsoleData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlPilotConsoleData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlPilotConsoleData</FONT></A>.chan1_raw = pilData[0];
</SPAN><SPAN><A CLASS="LN" NAME="107">  107   </A>    <A HREF="mavlinkSensorMcu_c.html#var_mlPilotConsoleData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlPilotConsoleData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlPilotConsoleData</FONT></A>.chan2_raw = pilData[1];
</SPAN><SPAN><A CLASS="LN" NAME="108">  108   </A>    <A HREF="mavlinkSensorMcu_c.html#var_mlPilotConsoleData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlPilotConsoleData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlPilotConsoleData</FONT></A>.chan3_raw = pilData[2];
</SPAN><SPAN><A CLASS="LN" NAME="109">  109   </A>    <A HREF="mavlinkSensorMcu_c.html#var_mlPilotConsoleData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlPilotConsoleData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlPilotConsoleData</FONT></A>.chan4_raw = pilData[3];
</SPAN><SPAN><A CLASS="LN" NAME="110">  110   </A>    <A HREF="mavlinkSensorMcu_c.html#var_mlPilotConsoleData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlPilotConsoleData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlPilotConsoleData</FONT></A>.chan5_raw = pilData[4];
</SPAN><SPAN><A CLASS="LN" NAME="111">  111   </A><B>}</B>
</SPAN><SPAN><A CLASS="LN" NAME="112">  112   </A>
</SPAN><SPAN><A CLASS="LN" NAME="113">  113   </A><SPAN CLASS="DT">void</SPAN> <A NAME="fcn_updateDiagnosticFl">updateDiagnosticFl</A>(<SPAN CLASS="DT">float</SPAN>* diagFl) <B>{</B>
</SPAN><SPAN><A CLASS="LN" NAME="114">  114   </A>    <A HREF="mavlinkSensorMcu_c.html#var_mlDiagnosticData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlDiagnosticData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlDiagnosticData</FONT></A>.diagFl1 = diagFl[0];
</SPAN><SPAN><A CLASS="LN" NAME="115">  115   </A>    <A HREF="mavlinkSensorMcu_c.html#var_mlDiagnosticData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlDiagnosticData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlDiagnosticData</FONT></A>.diagFl2 = diagFl[1];
</SPAN><SPAN><A CLASS="LN" NAME="116">  116   </A>    <A HREF="mavlinkSensorMcu_c.html#var_mlDiagnosticData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlDiagnosticData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlDiagnosticData</FONT></A>.diagFl3 = diagFl[2];
</SPAN><SPAN><A CLASS="LN" NAME="117">  117   </A><B>}</B>
</SPAN><SPAN><A CLASS="LN" NAME="118">  118   </A>
</SPAN><SPAN><A CLASS="LN" NAME="119">  119   </A><SPAN CLASS="DT">void</SPAN> <A NAME="fcn_updateDiagnosticSh">updateDiagnosticSh</A>(int16_t* diagSh) <B>{</B>
</SPAN><SPAN><A CLASS="LN" NAME="120">  120   </A>    <A HREF="mavlinkSensorMcu_c.html#var_mlDiagnosticData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlDiagnosticData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlDiagnosticData</FONT></A>.diagSh1 = diagSh[0];
</SPAN><SPAN><A CLASS="LN" NAME="121">  121   </A>    <A HREF="mavlinkSensorMcu_c.html#var_mlDiagnosticData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlDiagnosticData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlDiagnosticData</FONT></A>.diagSh2 = diagSh[1];
</SPAN><SPAN><A CLASS="LN" NAME="122">  122   </A>    <A HREF="mavlinkSensorMcu_c.html#var_mlDiagnosticData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlDiagnosticData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlDiagnosticData</FONT></A>.diagSh3 = diagSh[2];
</SPAN><SPAN><A CLASS="LN" NAME="123">  123   </A><B>}</B>
</SPAN><SPAN><A CLASS="LN" NAME="124">  124   </A>
</SPAN><SPAN><A CLASS="LN" NAME="125">  125   </A><SPAN CLASS="DT">void</SPAN> <A NAME="fcn_updateBias">updateBias</A>(<SPAN CLASS="DT">float</SPAN> * biasData) <B>{</B>
</SPAN><SPAN><A CLASS="LN" NAME="126">  126   </A>    <A HREF="mavlinkSensorMcu_c.html#var_mlSensorBiasData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlSensorBiasData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlSensorBiasData</FONT></A>.axBias = biasData[0];
</SPAN><SPAN><A CLASS="LN" NAME="127">  127   </A>    <A HREF="mavlinkSensorMcu_c.html#var_mlSensorBiasData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlSensorBiasData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlSensorBiasData</FONT></A>.ayBias = biasData[1];
</SPAN><SPAN><A CLASS="LN" NAME="128">  128   </A>    <A HREF="mavlinkSensorMcu_c.html#var_mlSensorBiasData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlSensorBiasData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlSensorBiasData</FONT></A>.azBias = biasData[2];
</SPAN><SPAN><A CLASS="LN" NAME="129">  129   </A>    <A HREF="mavlinkSensorMcu_c.html#var_mlSensorBiasData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlSensorBiasData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlSensorBiasData</FONT></A>.gxBias = biasData[3];
</SPAN><SPAN><A CLASS="LN" NAME="130">  130   </A>    <A HREF="mavlinkSensorMcu_c.html#var_mlSensorBiasData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlSensorBiasData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlSensorBiasData</FONT></A>.gyBias = biasData[4];
</SPAN><SPAN><A CLASS="LN" NAME="131">  131   </A>    <A HREF="mavlinkSensorMcu_c.html#var_mlSensorBiasData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlSensorBiasData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlSensorBiasData</FONT></A>.gzBias = biasData[5];
</SPAN><SPAN><A CLASS="LN" NAME="132">  132   </A><B>}</B>
</SPAN><SPAN><A CLASS="LN" NAME="133">  133   </A>
</SPAN><SPAN><A CLASS="LN" NAME="134">  134   </A><SPAN CLASS="DT">void</SPAN> <A NAME="fcn_updateSensorData">updateSensorData</A>(<SPAN CLASS="DT">float</SPAN>* sens) <B>{</B>
</SPAN><SPAN><A CLASS="LN" NAME="135">  135   </A>    <A HREF="mavlinkSensorMcu_c.html#var_mlFilteredData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlFilteredData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlFilteredData</FONT></A>.xacc = (int16_t) (sens[0] * MPS_TO_MG);
</SPAN><SPAN><A CLASS="LN" NAME="136">  136   </A>    <A HREF="mavlinkSensorMcu_c.html#var_mlFilteredData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlFilteredData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlFilteredData</FONT></A>.yacc = (int16_t) (sens[1] * MPS_TO_MG);
</SPAN><SPAN><A CLASS="LN" NAME="137">  137   </A>    <A HREF="mavlinkSensorMcu_c.html#var_mlFilteredData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlFilteredData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlFilteredData</FONT></A>.zacc = (int16_t) (sens[2] * MPS_TO_MG);
</SPAN><SPAN><A CLASS="LN" NAME="138">  138   </A>    <A HREF="mavlinkSensorMcu_c.html#var_mlFilteredData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlFilteredData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlFilteredData</FONT></A>.xmag = (int16_t) (sens[3]); <SPAN CLASS="CT">// assuming milligaus</SPAN>
</SPAN><SPAN><A CLASS="LN" NAME="139">  139   </A>    <A HREF="mavlinkSensorMcu_c.html#var_mlFilteredData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlFilteredData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlFilteredData</FONT></A>.ymag = (int16_t) (sens[4]);
</SPAN><SPAN><A CLASS="LN" NAME="140">  140   </A>    <A HREF="mavlinkSensorMcu_c.html#var_mlFilteredData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlFilteredData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlFilteredData</FONT></A>.zmag = (int16_t) (sens[5]);
</SPAN><SPAN><A CLASS="LN" NAME="141">  141   </A>    <A HREF="mavlinkSensorMcu_c.html#var_mlFilteredData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlFilteredData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlFilteredData</FONT></A>.xgyro = (int16_t) (sens[6]*1000.0);
</SPAN><SPAN><A CLASS="LN" NAME="142">  142   </A>    <A HREF="mavlinkSensorMcu_c.html#var_mlFilteredData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlFilteredData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlFilteredData</FONT></A>.ygyro = (int16_t) (sens[7]*1000.0);
</SPAN><SPAN><A CLASS="LN" NAME="143">  143   </A>    <A HREF="mavlinkSensorMcu_c.html#var_mlFilteredData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlFilteredData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlFilteredData</FONT></A>.zgyro = (int16_t) (sens[8]*1000.0);
</SPAN><SPAN><A CLASS="LN" NAME="144">  144   </A><B>}</B>
</SPAN><SPAN><A CLASS="LN" NAME="145">  145   </A>
</SPAN><SPAN><A CLASS="LN" NAME="146">  146   </A>uint8_t <A NAME="fcn_isFixValid">isFixValid</A> (<SPAN CLASS="DT">void</SPAN>)<B>{</B>
</SPAN><SPAN><A CLASS="LN" NAME="147">  147   </A>    <SPAN CLASS="KW">return</SPAN> (<A HREF="AUAV3_AND_SLUGS_SENSOR_c.html#var_mlGpsData" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlGpsData');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlGpsData</FONT></A>.fix_type == GPS_FIX_3D);
</SPAN><SPAN><A CLASS="LN" NAME="148">  148   </A><B>}</B>
</SPAN><SPAN><A CLASS="LN" NAME="149">  149   </A>
</SPAN><SPAN><A CLASS="LN" NAME="150">  150   </A><SPAN CLASS="DT">void</SPAN> <A NAME="fcn_updateSensorDiag">updateSensorDiag</A> (<SPAN CLASS="DT">float</SPAN>* diag)<B>{</B>
</SPAN><SPAN><A CLASS="LN" NAME="151">  151   </A>    <A HREF="mavlinkSensorMcu_c.html#var_mlSensorDiag" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlSensorDiag');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlSensorDiag</FONT></A>.float1 = diag[0];
</SPAN><SPAN><A CLASS="LN" NAME="152">  152   </A>    <A HREF="mavlinkSensorMcu_c.html#var_mlSensorDiag" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlSensorDiag');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlSensorDiag</FONT></A>.float2 = diag[1];
</SPAN><SPAN><A CLASS="LN" NAME="153">  153   </A>    <A HREF="mavlinkSensorMcu_c.html#var_mlSensorDiag" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlSensorDiag');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlSensorDiag</FONT></A>.int1 = (int16_t) diag[2];
</SPAN><SPAN><A CLASS="LN" NAME="154">  154   </A>    <A HREF="mavlinkSensorMcu_c.html#var_mlSensorDiag" ONCLICK="if (top) if (top.docHiliteMe) top.docHiliteMe(window, 'var_mlSensorDiag');" TARGET="rtwreport_document_frame"><FONT COLOR="#1122aa">mlSensorDiag</FONT></A>.char1 = (int8_t) diag[3];
</SPAN><SPAN><A CLASS="LN" NAME="155">  155   </A><B>}</B>
</SPAN><SPAN><A CLASS="LN" NAME="156">  156   </A>
</SPAN><SPAN><A CLASS="LN" NAME="157">  157   </A>
</SPAN></PRE>
</TD></TR></TABLE>
</P>
</BODY>
</HTML>